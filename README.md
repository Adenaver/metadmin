# metadmin

### Описание
Это - мод, помогающий отследить историю повышений пользователя, назначения тестров им и т.д. Изначально заточен под мод [Metrostroi](https://github.com/glebqip/metrostroi_beta). Может хранить данные как в игровых файлах, так и в БД MySQL сервера тем самым синхронизуя статусы на разных серверах.

Полный список функций:
* Повышение, понижение игроков
* Выдача/отбирание талонов
* Отслеживание срыва пломб
* Запись нарушений (Можно добавлять нарушения вручную, в присрыве пломб добавляются автоматически)
* История повышений/понижений пользователя в т.ч. сохранение ников / SteamID тех, кто понижал/повышал
* Возможность добавления, редактирования, и назначения тестов игрокам, оценивание (сдал/не сдал/на проверке)

### Установка.

* Кинуть в папку Addons папку с содержимым репозитория.
* Если сервер не новый, то рекомендуется metadmin.groupwrite задать true, иначе всех, кто зайдет впервые после установки мода перекинет в группу user.
* ЗАПРЕТИТЕ всем пользоваться командами !adduser и !removeuser, используйте !setrank взамен. Использование указанных команд не будет заносить информацию о сданных экзаменах в хранилище мода!

Если хотите использовать MySQL БД (Актуально для нескольких синхронизуемых серверов), то понадобится еще сделать следующее:
* Кинуть [это](https://github.com/syl0r/MySQLOO/blob/master/out/windows/gmsv_mysqloo_win32.dll) в garrysmod/lua/bin
* Кинуть [это](https://github.com/syl0r/MySQLOO/raw/master/MySQL/lib/windows/libmysql.dll) в КОРНЕВУЮ ДИРЕКТОРИЮ СЕРВЕРА рядом с srcds.exe
* Выполнить запрос к MySQL серверу (Текст хранится в hellreach_metoi.sql)
* В /lua/autorun/server.lua metadmin.provider определить как mysql
* В /lua/metadmin/providers/mysql.lua указать параметры коннекта к БД
